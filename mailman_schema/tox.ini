[tox]
envlist = {py35,py36,py37},diff-cover,lint
skip_missing_interpreters = True

[testenv]
commands =
    python -m pytest -v {posargs:fedora_messaging_schemas/mailman}
usedevelop = True
deps =
    pytest
    pytest-cov
    mock
# When running in OpenShift you don't have a username, so expanduser
# won't work. If you are running your tests in CentOS CI, this line is
# important so the tests can pass there, otherwise tox will fail to find
# a home directory when looking for configuration files.
passenv = HOME

[testenv:diff-cover]
deps =
    diff-cover
commands =
    diff-cover coverage.xml --compare-branch=origin/develop --fail-under=100

[testenv:lint]
commands =
    python -m flake8 {posargs:fedora_messaging_schemas.mailman}
deps =
    flake8>3.0
